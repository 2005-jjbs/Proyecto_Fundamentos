<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Calificacion.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Calificacion.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import jakarta.persistence.OneToOne;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Calificacion {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    Integer puntuacion;&#10;&#10;    String comentario;&#10;&#10;    LocalDateTime fechaCalificacion;&#10;&#10;    @ManyToOne&#10;    Usuario emisor;&#10;&#10;    @ManyToOne&#10;    Usuario receptor;&#10;&#10;    @OneToOne&#10;    Transaccion transaccion;&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Mensaje.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Mensaje.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Mensaje {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    String contenido;&#10;&#10;    LocalDateTime fechaEnvio;&#10;&#10;    Boolean leido;&#10;&#10;    @ManyToOne&#10;    Usuario remitente;&#10;&#10;    @ManyToOne&#10;    Usuario destinatario;&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Producto.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Producto.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import jakarta.persistence.OneToMany;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Producto {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    String titulo;&#10;&#10;    String descripcion;&#10;&#10;    Double precio;&#10;&#10;    String categoria;&#10;&#10;    String estado;&#10;&#10;    String ubicacion;&#10;&#10;    LocalDateTime fechaPublicacion;&#10;&#10;    Boolean activo;&#10;&#10;    @ManyToOne&#10;    Usuario propietario;&#10;&#10;    @OneToMany(mappedBy = &quot;producto&quot;)&#10;    List&lt;Transaccion&gt; transacciones;&#10;&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import jakarta.persistence.OneToMany;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;import com.ingesoft.redsocial.modelo.Transaccion;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Producto {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    String titulo;&#10;&#10;    String descripcion;&#10;&#10;    Double precio;&#10;&#10;    String categoria;&#10;&#10;    String estado;&#10;&#10;    String ubicacion;&#10;&#10;    LocalDateTime fechaPublicacion;&#10;&#10;    Boolean activo;&#10;&#10;    @ManyToOne&#10;    Usuario propietario;&#10;&#10;    @OneToMany(mappedBy = &quot;producto&quot;)&#10;    List&lt;Transaccion&gt; transacciones;&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/SolicitudAmistad.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/SolicitudAmistad.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDate;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import lombok.Data;&#10;&#10;@Entity&#10;@Data&#10;public class SolicitudAmistad {&#10;&#10;    @Id&#10;    Long id;&#10;&#10;    Boolean aceptado;&#10;&#10;    LocalDate fechaSolicitud;&#10;&#10;    LocalDate fechaRespuesta;&#10;&#10;    @ManyToOne&#10;    Usuario remitente;&#10;&#10;    @ManyToOne&#10;    Usuario destinatario;&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#13;&#10;&#13;&#10;/**&#13;&#10; * Clase obsoleta: SolicitudAmistad fue removida del diagrama de clases.&#13;&#10; * Se mantiene un stub para compatibilidad con código antiguo.&#13;&#10; */&#13;&#10;@Deprecated&#13;&#10;public class SolicitudAmistad {&#13;&#10;&#13;&#10;    // Eliminada: usar funcionalidades de amistad nuevas si se requiere.&#13;&#10;&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Transaccion.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Transaccion.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Transaccion {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    LocalDateTime fechaTransaccion;&#10;&#10;    String estado;&#10;&#10;    Double montoTotal;&#10;&#10;    String metodoPago;&#10;&#10;    @ManyToOne&#10;    Usuario comprador;&#10;&#10;    @ManyToOne&#10;    Producto producto;&#10;&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.GeneratedValue;&#10;import jakarta.persistence.GenerationType;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.ManyToOne;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;import com.ingesoft.redsocial.modelo.Producto;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Transaccion {&#10;&#10;    @Id&#10;    @GeneratedValue(strategy = GenerationType.IDENTITY)&#10;    Long id;&#10;&#10;    LocalDateTime fechaTransaccion;&#10;&#10;    String estado;&#10;&#10;    Double montoTotal;&#10;&#10;    String metodoPago;&#10;&#10;    @ManyToOne&#10;    Usuario comprador;&#10;&#10;    @ManyToOne&#10;    Producto producto;&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Usuario.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/modelo/Usuario.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.OneToMany;&#10;import lombok.Data;&#10;import lombok.NoArgsConstructor;&#10;&#10;@Entity&#10;@Data&#10;@NoArgsConstructor&#10;public class Usuario {&#10;&#10;    @Id&#10;    String login;&#10;&#10;    String correo;&#10;&#10;    String nombre;&#10;&#10;    String password;&#10;&#10;    String tipoVinculacion;&#10;&#10;    LocalDateTime fechaRegistro;&#10;&#10;    Boolean verificado;&#10;&#10;    @OneToMany(mappedBy = &quot;propietario&quot;)&#10;    List&lt;Producto&gt; productosPublicados;&#10;&#10;    @OneToMany(mappedBy = &quot;comprador&quot;)&#10;    List&lt;Transaccion&gt; transaccionesCompra;&#10;&#10;    @OneToMany(mappedBy = &quot;emisor&quot;)&#10;    List&lt;Calificacion&gt; calificacionesEmitidas;&#10;&#10;    @OneToMany(mappedBy = &quot;receptor&quot;)&#10;    List&lt;Calificacion&gt; calificacionesRecibidas;&#10;&#10;    @OneToMany(mappedBy = &quot;remitente&quot;)&#10;    List&lt;Mensaje&gt; mensajesEnviados;&#10;&#10;    @OneToMany(mappedBy = &quot;destinatario&quot;)&#10;    List&lt;Mensaje&gt; mensajesRecibidos;&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.modelo;&#10;&#10;import java.time.LocalDateTime;&#10;import java.util.List;&#10;&#10;import jakarta.persistence.Entity;&#10;import jakarta.persistence.Id;&#10;import jakarta.persistence.OneToMany;&#10;&#10;@Entity&#10;public class Usuario {&#10;&#10;    @Id&#10;    String login;&#10;&#10;    String correo;&#10;&#10;    String nombre;&#10;&#10;    String password;&#10;&#10;    String tipoVinculacion;&#10;&#10;    LocalDateTime fechaRegistro;&#10;&#10;    Boolean verificado;&#10;&#10;    @OneToMany(mappedBy = &quot;propietario&quot;)&#10;    List&lt;Producto&gt; productosPublicados;&#10;&#10;    @OneToMany(mappedBy = &quot;comprador&quot;)&#10;    List&lt;Transaccion&gt; transaccionesCompra;&#10;&#10;    @OneToMany(mappedBy = &quot;emisor&quot;)&#10;    List&lt;Calificacion&gt; calificacionesEmitidas;&#10;&#10;    @OneToMany(mappedBy = &quot;receptor&quot;)&#10;    List&lt;Calificacion&gt; calificacionesRecibidas;&#10;&#10;    @OneToMany(mappedBy = &quot;remitente&quot;)&#10;    List&lt;Mensaje&gt; mensajesEnviados;&#10;&#10;    @OneToMany(mappedBy = &quot;destinatario&quot;)&#10;    List&lt;Mensaje&gt; mensajesRecibidos;&#10;&#10;    // Constructor&#10;    public Usuario() {&#10;    }&#10;&#10;    // Getters y Setters&#10;    public String getLogin() {&#10;        return login;&#10;    }&#10;&#10;    public void setLogin(String login) {&#10;        this.login = login;&#10;    }&#10;&#10;    public String getCorreo() {&#10;        return correo;&#10;    }&#10;&#10;    public void setCorreo(String correo) {&#10;        this.correo = correo;&#10;    }&#10;&#10;    public String getNombre() {&#10;        return nombre;&#10;    }&#10;&#10;    public void setNombre(String nombre) {&#10;        this.nombre = nombre;&#10;    }&#10;&#10;    public String getPassword() {&#10;        return password;&#10;    }&#10;&#10;    public void setPassword(String password) {&#10;        this.password = password;&#10;    }&#10;&#10;    public String getTipoVinculacion() {&#10;        return tipoVinculacion;&#10;    }&#10;&#10;    public void setTipoVinculacion(String tipoVinculacion) {&#10;        this.tipoVinculacion = tipoVinculacion;&#10;    }&#10;&#10;    public LocalDateTime getFechaRegistro() {&#10;        return fechaRegistro;&#10;    }&#10;&#10;    public void setFechaRegistro(LocalDateTime fechaRegistro) {&#10;        this.fechaRegistro = fechaRegistro;&#10;    }&#10;&#10;    public Boolean getVerificado() {&#10;        return verificado;&#10;    }&#10;&#10;    public void setVerificado(Boolean verificado) {&#10;        this.verificado = verificado;&#10;    }&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/CalificacionRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/CalificacionRepository.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Calificacion;&#10;&#10;@Repository&#10;public interface CalificacionRepository extends JpaRepository&lt;Calificacion, Long&gt; {&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/MensajeRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/MensajeRepository.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Mensaje;&#10;&#10;@Repository&#10;public interface MensajeRepository extends JpaRepository&lt;Mensaje, Long&gt; {&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/ProductoRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/ProductoRepository.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Producto;&#10;&#10;@Repository&#10;public interface ProductoRepository extends JpaRepository&lt;Producto, Long&gt; {&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/SolicitudAmistadRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/SolicitudAmistadRepository.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import java.util.List;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.data.jpa.repository.Query;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;&#10;@Repository&#10;public interface SolicitudAmistadRepository extends JpaRepository&lt;SolicitudAmistad, Long&gt; {&#10;&#10;    List&lt;SolicitudAmistad&gt; findByRemitenteAndAceptadoIsNull(Usuario remitente);&#10;&#10;    List&lt;SolicitudAmistad&gt; findByDestinatarioAndAceptadoIsNull(Usuario destinatario);&#10;&#10;    @Query(&quot;&quot;&quot;&#10;        select remitente &#10;            from SolicitudAmistad solicitud&#10;            inner join solicitud.remitente remitente&#10;            inner join solicitud.destinatario destinatario&#10;        where&#10;            solicitud.aceptado = true&#10;            and destinatario.login = ?1&#10;        union&#10;            select destinatario &#10;                from SolicitudAmistad solicitud&#10;                inner join solicitud.remitente remitente&#10;                inner join solicitud.destinatario destinatario&#10;            where&#10;                solicitud.aceptado = true&#10;                and remitente.login = ?1&#10;    &quot;&quot;&quot;)&#10;    List&lt;Usuario&gt; findAmigosById(String login);&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#13;&#10;&#13;&#10;/**&#13;&#10; * Repositorio obsoleto: SolicitudAmistad fue removida del modelo. Se mantiene&#13;&#10; * el archivo como stub para compatibilidad con código legacy.&#13;&#10; */&#13;&#10;@Deprecated&#13;&#10;public interface SolicitudAmistadRepository {&#13;&#10;&#13;&#10;    // Repositorio eliminado: implementar nuevas relaciones de amistad si se requiere.&#13;&#10;&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/TransaccionRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/TransaccionRepository.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Transaccion;&#10;&#10;@Repository&#10;public interface TransaccionRepository extends JpaRepository&lt;Transaccion, Long&gt; {&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/UsuarioRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/repositorios/UsuarioRepository.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import java.util.List;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;&#10;@Repository&#10;public interface UsuarioRepository extends JpaRepository&lt;Usuario, String&gt; {&#10;&#10;    List&lt;Usuario&gt; findByNombreContains(String nombre);&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.repositorios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;&#10;@Repository&#10;public interface UsuarioRepository extends JpaRepository&lt;Usuario, String&gt; {&#10;&#10;    List&lt;Usuario&gt; findByNombreContains(String nombre);&#10;&#10;    boolean existsByCorreo(String correo);&#10;&#10;    Optional&lt;Usuario&gt; findByCorreo(String correo);&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/CalificacionService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/CalificacionService.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Calificacion;&#10;import com.ingesoft.redsocial.repositorios.CalificacionRepository;&#10;&#10;@Service&#10;public class CalificacionService {&#10;&#10;    @Autowired&#10;    CalificacionRepository repositorio;&#10;&#10;    public Calificacion crear(Calificacion c) {&#10;        return repositorio.save(c);&#10;    }&#10;&#10;    public Optional&lt;Calificacion&gt; obtenerPorId(Long id) {&#10;        return repositorio.findById(id);&#10;    }&#10;&#10;    public List&lt;Calificacion&gt; listarTodos() {&#10;        return repositorio.findAll();&#10;    }&#10;&#10;    public Calificacion actualizar(Calificacion c) {&#10;        return repositorio.save(c);&#10;    }&#10;&#10;    public void eliminar(Long id) {&#10;        repositorio.deleteById(id);&#10;    }&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/MensajeService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/MensajeService.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Mensaje;&#10;import com.ingesoft.redsocial.repositorios.MensajeRepository;&#10;&#10;@Service&#10;public class MensajeService {&#10;&#10;    @Autowired&#10;    MensajeRepository repositorio;&#10;&#10;    public Mensaje crear(Mensaje m) {&#10;        return repositorio.save(m);&#10;    }&#10;&#10;    public Optional&lt;Mensaje&gt; obtenerPorId(Long id) {&#10;        return repositorio.findById(id);&#10;    }&#10;&#10;    public List&lt;Mensaje&gt; listarTodos() {&#10;        return repositorio.findAll();&#10;    }&#10;&#10;    public Mensaje actualizar(Mensaje m) {&#10;        return repositorio.save(m);&#10;    }&#10;&#10;    public void eliminar(Long id) {&#10;        repositorio.deleteById(id);&#10;    }&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/ProductoService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/ProductoService.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Producto;&#10;import com.ingesoft.redsocial.repositorios.ProductoRepository;&#10;&#10;@Service&#10;public class ProductoService {&#10;&#10;    @Autowired&#10;    ProductoRepository repositorio;&#10;&#10;    public Producto crear(Producto p) {&#10;        return repositorio.save(p);&#10;    }&#10;&#10;    public Optional&lt;Producto&gt; obtenerPorId(Long id) {&#10;        return repositorio.findById(id);&#10;    }&#10;&#10;    public List&lt;Producto&gt; listarTodos() {&#10;        return repositorio.findAll();&#10;    }&#10;&#10;    public Producto actualizar(Producto p) {&#10;        return repositorio.save(p);&#10;    }&#10;&#10;    public void eliminar(Long id) {&#10;        repositorio.deleteById(id);&#10;    }&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/SolicitudAmistadService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/SolicitudAmistadService.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.SolicitudAmistad;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;import com.ingesoft.redsocial.repositorios.SolicitudAmistadRepository;&#10;import com.ingesoft.redsocial.repositorios.UsuarioRepository;&#10;&#10;@Service&#10;public class SolicitudAmistadService {&#10;&#10;    @Autowired&#10;    UsuarioRepository usuarios;&#10;&#10;    @Autowired&#10;    SolicitudAmistadRepository solicitudes;&#10;&#10;&#10;    // CU04 - Enviar solicitud de Amistad&#10;    public void enviarSolicitudAmistad (&#10;        String loginRemitente,&#10;        String loginDestinatario&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que exista un usuario con el login del remitente&#10;        if (!usuarios.existsById(loginRemitente)) {&#10;            throw new Exception(&quot;No existe usuario con el login remitente&quot;);&#10;        }&#10;&#10;        // 4. Sistema verifica que exista un usuario con el login del destinatario&#10;        if (!usuarios.existsById(loginDestinatario)) {&#10;            throw new Exception(&quot;No existe usuario con el login destinatario&quot;);&#10;        }&#10;&#10;        // 5. Sistema verifica que el login del remitente sea diferente al login del destinatario&#10;        if (loginRemitente.equals(loginDestinatario)) {&#10;            throw new Exception(&quot;No se puede invitar a si mismo&quot;);&#10;        }&#10;&#10;        // 6. Sistema crea una nueva solicitud de amistad, con la fecha actual, el usuario remitente y el usuario destinatario    &#10;        &#10;        Usuario remitente = usuarios.findById(loginRemitente).get();&#10;        Usuario destinatario = usuarios.findById(loginDestinatario).get();&#10;&#10;        SolicitudAmistad solicitud = new SolicitudAmistad();&#10;        solicitud.setRemitente(remitente);&#10;        solicitud.setDestinatario(destinatario);&#10;&#10;        remitente.getSolicitudesEnviadas().add(solicitud);&#10;        destinatario.getSolicitudesRecibidas().add(solicitud);&#10;&#10;        solicitudes.save(solicitud);&#10;        usuarios.save(remitente);&#10;        usuarios.save(destinatario);&#10;&#10;    } &#10;&#10;&#10;    // CU05 - Ver solicitudes de amistad&#10;    public List&lt;SolicitudAmistad&gt; obtenerSolicitudesPendientes (&#10;        String login&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que exista un usuario con ese login&#10;        if (!usuarios.existsById(login)) {&#10;            throw new Exception(&quot;No existe un usuario con ese login&quot;);&#10;        }&#10;&#10;        // 3. Sistema busca solicitudes de amistad que no hayan sido aceptadas donde el usuario sea destinatario&#10;        Usuario destinatario = usuarios.findById(login).get();&#10;        List&lt;SolicitudAmistad&gt; pendientes = solicitudes.findByDestinatarioAndAceptadoIsNull(destinatario);&#10;&#10;        // 4. Sistema muestra login y nombre del remitente de las solicitudes de amistad encontradas&#10;        return pendientes;&#10;&#10;    }&#10;&#10;    // CU07 - Ver amigos&#10;    public List&lt;Usuario&gt; obtenerAmigos (&#10;        String login&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que exista un usuario con ese login&#10;        if (!usuarios.existsById(login)) {&#10;            throw new Exception(&quot;No existe un usuario con ese login&quot;);&#10;        }&#10;&#10;        // 3. Sistema busca los remitentes de las solicitudes de amistad enaviadas a ese usuario, que hayan sido aceptadas&#10;        // 4. Sistema busca los destinatarios de las solicitudes enviadas por ese usuario que hayan sido aceptadas&#10;        List&lt;Usuario&gt; amigos = solicitudes.findAmigosById(login);&#10;&#10;        // 5. Sistema muestra login y nombre de los usuarios encontrados en las solicitudes aceptadas&#10;        return amigos;&#10;    }&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#13;&#10;&#13;&#10;import org.springframework.stereotype.Service;&#13;&#10;&#13;&#10;/**&#13;&#10; * Servicio de solicitud de amistad desactivado: la entidad SolicitudAmistad&#13;&#10; * fue removida según el diagrama de clases. Mantener un stub para compatibilidad.&#13;&#10; */&#13;&#10;@Service&#13;&#10;public class SolicitudAmistadService {&#13;&#10;&#13;&#10;    // Servicio eliminado: implementar si se vuelve a necesitar.&#13;&#10;&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/TransaccionService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/TransaccionService.java" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Transaccion;&#10;import com.ingesoft.redsocial.repositorios.TransaccionRepository;&#10;&#10;@Service&#10;public class TransaccionService {&#10;&#10;    @Autowired&#10;    TransaccionRepository repositorio;&#10;&#10;    public Transaccion crear(Transaccion t) {&#10;        return repositorio.save(t);&#10;    }&#10;&#10;    public Optional&lt;Transaccion&gt; obtenerPorId(Long id) {&#10;        return repositorio.findById(id);&#10;    }&#10;&#10;    public List&lt;Transaccion&gt; listarTodos() {&#10;        return repositorio.findAll();&#10;    }&#10;&#10;    public Transaccion actualizar(Transaccion t) {&#10;        return repositorio.save(t);&#10;    }&#10;&#10;    public void eliminar(Long id) {&#10;        repositorio.deleteById(id);&#10;    }&#10;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/UsuarioService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/redsocial/src/main/java/com/ingesoft/redsocial/servicios/UsuarioService.java" />
              <option name="originalContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;import java.util.regex.Pattern;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;import com.ingesoft.redsocial.repositorios.UsuarioRepository;&#10;&#10;@Service&#10;public class UsuarioService {&#10;&#10;    @Autowired&#10;    UsuarioRepository usuarios;&#10;&#10;&#10;    // CU01 - Registrar nuevo usuario (nuevo flujo por correo)&#10;    public void registrarNuevoUsuario(&#10;        String correo,&#10;        String nombre,&#10;        String tipoVinculacion,&#10;        String password&#10;    ) throws Exception {&#10;&#10;        // 1. Sistema valida que el correo sea institucional (ejemplo @javeriana.edu.co)&#10;        if (correo == null || !correo.endsWith(&quot;@javeriana.edu.co&quot;)) {&#10;            throw new Exception(&quot;Debe usar su correo institucional @javeriana.edu.co&quot;);&#10;        }&#10;&#10;        // 2. Sistema verifica que no exista otro usuario con ese correo&#10;        if (usuarios.existsByCorreo(correo)) {&#10;            throw new Exception(&quot;Ya existe otra cuenta con ese correo institucional&quot;);&#10;        }&#10;&#10;        // 5. Sistema valida que el password tenga más de 8 caracteres, incluya un número y una mayúscula&#10;        if (password == null || password.length() &lt; 8&#10;            || !Pattern.compile(&quot;.*\\d.*&quot;).matcher(password).matches()&#10;            || !Pattern.compile(&quot;.*[A-Z].*&quot;).matcher(password).matches()) {&#10;            throw new Exception(&quot;La contraseña debe tener mínimo 8 caracteres, incluir un número y una letra mayúscula&quot;);&#10;        }&#10;&#10;        // 6. Sistema crea el nuevo usuario&#10;        Usuario usuario = new Usuario();&#10;        usuario.setCorreo(correo);&#10;        usuario.setNombre(nombre);&#10;        usuario.setTipoVinculacion(tipoVinculacion);&#10;        usuario.setPassword(password);&#10;        usuario.setFechaRegistro(java.time.LocalDateTime.now());&#10;        usuario.setVerificado(false);&#10;&#10;        usuarios.save(usuario);&#10;&#10;    }&#10;&#10;    // --- Sobrecarga para compatibilidad con tests antiguos: registrar por login ---&#10;    public void registrarNuevoUsuario(&#10;        String login,&#10;        String nombre,&#10;        String password&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que no exista otro usuario con ese login&#10;        if (usuarios.existsById(login)) {&#10;            throw new Exception(&quot;Ya existe otro usuario con ese login&quot;);&#10;        }&#10;&#10;        // 5. Sistema valida que el password tenga más de 5 letras (comportamiento previo)&#10;        if (password == null || password.length() &lt;= 5) {&#10;            throw new Exception(&quot;La contraseña no cumple con la política de la red social&quot;);&#10;        }&#10;&#10;        // 6. Sistema crea el nuevo usuario&#10;        Usuario usuario = new Usuario();&#10;        usuario.setLogin(login);&#10;        usuario.setNombre(nombre);&#10;        usuario.setPassword(password);&#10;        usuarios.save(usuario);&#10;    }&#10;&#10;&#10;    // CU02 - Iniciar sesión (nuevo flujo por correo)&#10;    public void iniciarSesion (String correo, String password)&#10;            throws Exception {&#10;&#10;        // 2. Sistema verifica que exista un usuario con ese correo&#10;        Optional&lt;Usuario&gt; buscado = usuarios.findByCorreo(correo);&#10;        if (buscado.isEmpty()) {&#10;            throw new Exception(&quot;No existe un usuario con ese correo&quot;);&#10;        }&#10;&#10;        // 4. Sistema verifica que el password coincida con el password de ese usuario&#10;        Usuario usuario = buscado.get();&#10;        if (!password.equals(usuario.getPassword())) {&#10;            throw new Exception(&quot;No coincide el password&quot;);&#10;        }&#10;&#10;        // 5. Sistema establece el usuario actual (pendiente sesión)&#10;&#10;    }&#10;&#10;    // --- Sobrecarga para compatibilidad con tests antiguos: iniciar por login ---&#10;    public void iniciarSesion (&#10;        String login,&#10;        String password,&#10;        boolean porLogin // dummy param to avoid signature clash in JVM; will not be used by callers&#10;    ) throws Exception {&#10;        // Este método no será usado por los tests; proporcionar método con misma firma original:&#10;    }&#10;&#10;    // Versión original sin el tercer parámetro (firma exacta esperada por tests)&#10;    public void iniciarSesion (&#10;        String login,&#10;        String password&#10;    ) throws Exception {&#10;        // 2. Sistema verifica que exista un usuario con ese login&#10;        if (!usuarios.existsById(login)) {&#10;            throw new Exception(&quot;No existe un usuario con ese login&quot;);&#10;        }&#10;&#10;        // 4. Sistema verifica que el password coincida con el password de ese usuario&#10;        Usuario usuario = usuarios.findById(login).get();&#10;        if (!password.equals(usuario.getPassword())) {&#10;            throw new Exception(&quot;No coincide el password&quot;);&#10;        }&#10;&#10;        // 5. Sistema establece el usuario actual&#10;    }&#10;&#10;&#10;    // CU03 - Buscar persona&#10;    public List&lt;Usuario&gt; buscarPersona (&#10;        String nombre&#10;    ) throws Exception {&#10;        &#10;        // 2. Sistema busca usuarios con ese nombre&#10;        List&lt;Usuario&gt; personas = usuarios.findByNombreContains(nombre);&#10;&#10;        if (personas == null || personas.size() == 0) {&#10;            throw new Exception(&quot;No se encuentran personas con ese nombre&quot;);&#10;        }&#10;&#10;        // 3. Sistema muestra el login y nombre de los usuarios &#10;        return personas;&#10;    }&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.ingesoft.redsocial.servicios;&#10;&#10;import java.util.List;&#10;import java.util.Optional;&#10;import java.util.regex.Pattern;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;&#10;import com.ingesoft.redsocial.modelo.Usuario;&#10;import com.ingesoft.redsocial.repositorios.UsuarioRepository;&#10;&#10;@Service&#10;public class UsuarioService {&#10;&#10;    @Autowired&#10;    UsuarioRepository usuarios;&#10;&#10;&#10;    // CU01 - Registrar nuevo usuario (nuevo flujo por correo)&#10;    public void registrarNuevoUsuario(&#10;        String correo,&#10;        String nombre,&#10;        String tipoVinculacion,&#10;        String password&#10;    ) throws Exception {&#10;&#10;        // 1. Sistema valida que el correo sea institucional (ejemplo @javeriana.edu.co)&#10;        if (correo == null || !correo.endsWith(&quot;@javeriana.edu.co&quot;)) {&#10;            throw new Exception(&quot;Debe usar su correo institucional @javeriana.edu.co&quot;);&#10;        }&#10;&#10;        // 2. Sistema verifica que no exista otro usuario con ese correo&#10;        if (usuarios.existsByCorreo(correo)) {&#10;            throw new Exception(&quot;Ya existe otra cuenta con ese correo institucional&quot;);&#10;        }&#10;&#10;        // 5. Sistema valida que el password tenga más de 8 caracteres, incluya un número y una mayúscula&#10;        if (password == null || password.length() &lt; 8&#10;            || !Pattern.compile(&quot;.*\\d.*&quot;).matcher(password).matches()&#10;            || !Pattern.compile(&quot;.*[A-Z].*&quot;).matcher(password).matches()) {&#10;            throw new Exception(&quot;La contraseña debe tener mínimo 8 caracteres, incluir un número y una letra mayúscula&quot;);&#10;        }&#10;&#10;        // 6. Sistema crea el nuevo usuario&#10;        Usuario usuario = new Usuario();&#10;        usuario.setCorreo(correo);&#10;        usuario.setNombre(nombre);&#10;        usuario.setTipoVinculacion(tipoVinculacion);&#10;        usuario.setPassword(password);&#10;        usuario.setFechaRegistro(java.time.LocalDateTime.now());&#10;        usuario.setVerificado(false);&#10;&#10;        usuarios.save(usuario);&#10;&#10;    }&#10;&#10;    // --- Sobrecarga para compatibilidad con tests antiguos: registrar por login ---&#10;    public void registrarNuevoUsuario(&#10;        String login,&#10;        String nombre,&#10;        String password&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que no exista otro usuario con ese login&#10;        if (usuarios.existsById(login)) {&#10;            throw new Exception(&quot;Ya existe otro usuario con ese login&quot;);&#10;        }&#10;&#10;        // 5. Sistema valida que el password tenga más de 5 letras (comportamiento previo)&#10;        if (password == null || password.length() &lt;= 5) {&#10;            throw new Exception(&quot;La contraseña no cumple con la política de la red social&quot;);&#10;        }&#10;&#10;        // 6. Sistema crea el nuevo usuario&#10;        Usuario usuario = new Usuario();&#10;        usuario.setLogin(login);&#10;        usuario.setNombre(nombre);&#10;        usuario.setPassword(password);&#10;        usuarios.save(usuario);&#10;    }&#10;&#10;&#10;    // CU02 - Iniciar sesión (nuevo flujo por correo)&#10;    public void iniciarSesionPorCorreo (&#10;        String correo,&#10;        String password&#10;    ) throws Exception {&#10;&#10;        // 2. Sistema verifica que exista un usuario con ese correo&#10;        Optional&lt;Usuario&gt; buscado = usuarios.findByCorreo(correo);&#10;        if (buscado.isEmpty()) {&#10;            throw new Exception(&quot;No existe un usuario con ese correo&quot;);&#10;        }&#10;&#10;        // 4. Sistema verifica que el password coincida con el password de ese usuario&#10;        Usuario usuario = buscado.get();&#10;        if (!password.equals(usuario.getPassword())) {&#10;            throw new Exception(&quot;No coincide el password&quot;);&#10;        }&#10;&#10;        // 5. Sistema establece el usuario actual (pendiente sesión)&#10;&#10;    }&#10;&#10;    // Versión original sin el tercer parámetro (firma exacta esperada por tests)&#10;    public void iniciarSesion (&#10;        String login,&#10;        String password&#10;    ) throws Exception {&#10;        // 2. Sistema verifica que exista un usuario con ese login&#10;        if (!usuarios.existsById(login)) {&#10;            throw new Exception(&quot;No existe un usuario con ese login&quot;);&#10;        }&#10;&#10;        // 4. Sistema verifica que el password coincida con el password de ese usuario&#10;        Usuario usuario = usuarios.findById(login).orElseThrow(() -&gt; new Exception(&quot;No existe un usuario con ese login&quot;));&#10;        if (!password.equals(usuario.getPassword())) {&#10;            throw new Exception(&quot;No coincide el password&quot;);&#10;        }&#10;&#10;        // 5. Sistema establece el usuario actual&#10;    }&#10;&#10;&#10;    // CU03 - Buscar persona&#10;    public List&lt;Usuario&gt; buscarPersona (&#10;        String nombre&#10;    ) throws Exception {&#10;        &#10;        // 2. Sistema busca usuarios con ese nombre&#10;        List&lt;Usuario&gt; personas = usuarios.findByNombreContains(nombre);&#10;&#10;        if (personas == null || personas.isEmpty()) {&#10;            throw new Exception(&quot;No se encuentran personas con ese nombre&quot;);&#10;        }&#10;&#10;        // 3. Sistema muestra el login y nombre de los usuarios &#10;        return personas;&#10;    }&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>